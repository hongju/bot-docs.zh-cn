通常，机器人向用户发送的每条消息与用户先前的输入直接相关。
在某些情况下，机器人可能需要向用户发送与当前聊天主题或用户发送的最后一条消息不直接相关的消息。 这些类型的消息称为主动消息。

主动消息在各种场景中都可以发挥作用。
如果机器人设置了计时器或提醒，它将需要在时间到来时通知用户。
或者，如果机器人从外部系统接收通知，则可能需要立即将该信息传达给用户。
例如，如果用户之前已经请求机器人监控产品的价格，则机器人可以在产品价格下降了 20% 时提醒用户。 或者，如果机器人需要一些时间来编译对用户问题的响应，则可以通知用户延迟并允许会话在此期间继续。 当机器人编译完对问题的响应时，将与用户共享该信息。

在机器人中实现主动消息时：

- 不要在短时间内发送多条主动消息。 某些通道强制限制机器人向用户发送消息的频率，并且如果违反这些限制，将禁用机器人。
- 不要通过其他方式（如电子邮件或短信）向之前未与机器人交互或未经请求与机器人联系的用户发送主动消息。

主动消息可能会产生意外行为。 请考虑以下场景。

![用户如何说话](~/media/designing-bots/capabilities/proactive1.png)

在此示例中，用户之前已要求机器人监控拉斯维加斯酒店的价格。
机器人启动了一个后台监控任务，该任务在过去的几天里一直在运行。
在会话中，当后台任务触发关于拉斯维加斯酒店折扣的通知消息时，用户当前正在预订伦敦旅行。 机器人将此信息插入到会话中，产生令人困惑的用户体验。

机器人应该如何处理这种情况？

- 等待当前的旅行预订完成，然后发送通知。 这种方法的破坏性最小，但传达信息的延迟可能会导致用户错过拉斯维加斯酒店的低价机会。
- 取消当前的旅行预订流并立即发送通知。 虽然这种方法能够及时提供信息，但可能会迫使他们重新开始预订旅行，从而让用户感到沮丧。
- 中断当前预订，明确地将会话主题更改为拉斯维加斯的酒店，直到用户响应，然后切换回正在进行的旅行预订并从中断的地方继续。 这种方法似乎是最佳选择，但它为机器人开发者和用户带来了复杂性。

在大多数情况下，机器人将使用临时主动消息和其他技术的某种组合来处理这种情况。
